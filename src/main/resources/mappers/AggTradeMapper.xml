<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.team_biance.the_coin_killer.mapper.AggTradeMapper">

    <insert id="upsert" parameterType="com.team_biance.the_coin_killer.model.FAggTrade1m">
        INSERT INTO f_aggtrade_1m (
            symbol, ts_utc,
            taker_buy_qty, taker_sell_qty,
            trade_count, vwap_price
        ) VALUES (
            #{symbol}, #{tsUtc},
            #{takerBuyQty}, #{takerSellQty},
            #{tradeCount}, #{vwapPrice}
        )
        ON DUPLICATE KEY UPDATE
            taker_buy_qty = #{takerBuyQty},
            taker_sell_qty = #{takerSellQty},
            trade_count = #{tradeCount},
            vwap_price = #{vwapPrice}
    </insert>

</mapper>
